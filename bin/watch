#!/usr/bin/env bash

if type -P entr > /dev/null; then
  if [[ -n "$1" ]]; then
    filename=$1
    ext=$(echo $1 | awk -F . '{print $NF}')

    if [ $ext = 'sh' ]; then
      find $filename | entr -cr ./$filename 
    elif [ $ext = 'js' ]; then
      find $filename | entr -cr node $filename
    elif [ $ext = 'v' ]; then
      find $filename | entr -cr vl run $filename
    fi
  fi
fi
